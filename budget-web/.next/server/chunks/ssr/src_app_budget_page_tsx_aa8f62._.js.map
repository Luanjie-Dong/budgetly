{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/luanjiechen/Desktop/Projects/Personal_Projects/3.budget/my-budget/src/app/budget/page.tsx"],"sourcesContent":["'use client'\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from 'next/router';\n\ninterface transaction{\n  category:string,\n  information:string,\n  type:string,\n  date: Date,\n  recieve: number,\n  spend:number\n}\ninterface total {\n  recieve: number;\n  spend: number;\n}\n\ninterface budget {\n  name:string,\n  amount:number\n}\n\ninterface monthly {\n  month:string,\n  receive: number;\n  spend: number;\n}\n\nexport default function Budget() {\n\n    const currentYear = new Date().getFullYear()\n    const [selectedYear, setSelectedYear] = useState(currentYear);\n    const [transactionData,setTransactionData] = useState<transaction[]>([])\n    const [yearlyBudget,setYearlyBudget] = useState<budget[]>([])\n    const [monthlyBudget,setMonthlyBudget] = useState<monthly[]>([])\n    const years = Array.from({ length: 5 }, (_, i) => 2023 + i);\n    const transactions_endpoint = \"http://127.0.0.1:1000/get-transactions\"\n\n    \n\n    const get_transactions = async () => {\n      try {\n        const url = `${transactions_endpoint}?year=${encodeURIComponent(selectedYear)}`;\n    \n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n    \n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n    \n        const jsonData = await response.json();\n        if (jsonData.length === 0) {\n          setTransactionData([]);\n          setYearlyBudget([]);\n          setMonthlyBudget([]);\n        } else {\n          setTransactionData(jsonData);\n        } \n\n      } catch (error) {\n        if (error instanceof Error) {\n          console.log(error.message);\n        }\n        setTransactionData([]);\n        setYearlyBudget([]);\n        setMonthlyBudget([]);\n      }\n    };\n\n    useEffect(() => {\n      get_transactions();\n      \n    },[selectedYear]);\n\n    useEffect(() => {\n      const total_spend = transactionData.reduce((total, item) => total + item.spend, 0);\n      const total_receive = transactionData.reduce((total, item) => total + item.recieve, 0);\n      const total_balance = total_receive - total_spend;\n    \n      setYearlyBudget([\n        { name: \"Total Spent\", amount: total_spend },\n        { name: \"Total Receive\", amount: total_receive },\n        { name: \"Overall Balance\", amount: total_balance },\n      ]);\n    \n      const groupedData = transactionData.reduce<Record<string, total>>((acc, item) => {\n        const date = new Date(item.date);\n      \n        const year = date.getFullYear();\n        const monthIndex = date.getMonth(); \n      \n        const monthNames = [\n          \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n          \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n        ];\n        const formattedMonth = `${monthNames[monthIndex]} ${year}`;\n      \n        if (!acc[formattedMonth]) {\n          acc[formattedMonth] = { recieve: 0, spend: 0 };\n        }\n      \n        acc[formattedMonth].recieve += item.recieve;\n        acc[formattedMonth].spend += item.spend;\n      \n        return acc;\n      }, {});\n      \n    \n      const monthly_total = Object.entries(groupedData).map(([month, totals]) => ({\n        month,\n        receive: totals.recieve,\n        spend: totals.spend,\n      }));\n      setMonthlyBudget(monthly_total);\n    \n    }, [transactionData]);\n    \n    const handleViewDetails = (month : string) => {\n      \n      router.push(`/${month}`);\n    };\n\n    return (\n      <div className=\"\">\n        \n        <h1 className=\"mt-28 text-center text-6xl\">\n        <select\n          value={selectedYear}\n          onChange={(e) => setSelectedYear(parseInt(e.target.value))}\n          className=\"p-2 border border-gray-300 rounded-md\"\n        >\n          {years.map((year) => (\n            <option key={year} value={year}>\n              {year}\n            </option>\n          ))}\n        </select>{\" \"}\n        Budget\n        </h1>\n\n      <div className=\"mt-4 flex flex-wrap items-center justify-center gap-12\">\n        {yearlyBudget.map((budget, index) => (\n          <div\n            key={index}\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-60 text-center transition-transform transform hover:scale-105 hover:shadow-2xl\"\n          >\n            <h3 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-2\">\n              {budget.name}\n            </h3>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300\">\n              ${budget.amount.toLocaleString()}\n            </p>\n              </div>\n              ))}\n      </div>\n\n      <div className=\"p-4 mt-4\">\n  <h1 className=\"text-center text-3xl font-semibold mb-6 dark:text-white\">\n    Monthly Summary\n  </h1>\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\">\n        {monthlyBudget.map((log, index) => (\n          \n            <div\n              key={index}\n              className=\" dark:from-gray-800 dark:to-gray-900 shadow-lg rounded-lg p-6 text-center transition-transform transform hover:scale-105 hover:shadow-2xl border border-gray-200 dark:border-gray-700\"\n            >\n              <h2 className=\"text-xl font-bold text-gray-800 dark:text-white mb-4\">\n                {log.month}\n              </h2>\n              <div className=\"flex\">\n                <p className=\"text-lg text-green-500 font-medium mb-2\">\n                  Spend: ${log.spend.toFixed(2)}\n                </p>\n                <p className=\"text-lg text-blue-500 font-medium mb-2\">\n                  Receive: ${log.receive.toFixed(2)}\n                </p>\n                <p className={`text-lg font-medium ${log.receive - log.spend >= 0 ? 'text-green-600' : 'text-red-500'}`}>\n                  Balance: ${(log.receive - log.spend).toFixed(2)}\n                </p>\n              </div>\n              <button\n                className=\"mt-4 inline-flex items-center justify-center bg-blue-500 text-white py-2 px-4 rounded-md shadow-md hover:bg-blue-600 transition\"\n                onClick={() => handleViewDetails(log.month)}\n              >\n                <span className=\"mr-2\">View Details</span>\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"h-5 w-5\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                  strokeWidth={2}\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n          )\n        )}\n      </div>\n    </div>\n      </div>\n    );\n  }"],"names":[],"mappings":"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"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}