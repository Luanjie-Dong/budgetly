{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/luanjiechen/Desktop/Projects/Personal_Projects/3.budget/budget-web/src/app/budget/page.tsx"],"sourcesContent":["'use client'\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from 'next/navigation';\nimport { useSearchParams } from 'next/navigation';\n\ninterface transaction{\n  category:string,\n  information:string,\n  type:string,\n  date: Date,\n  recieve: number,\n  spend:number\n}\ninterface total {\n  recieve: number;\n  spend: number;\n}\n\ninterface budget {\n  name:string,\n  amount:number\n}\n\ninterface monthly {\n  month:string,\n  receive: number;\n  spend: number;\n}\n\nexport default function Budget() {\n    const router = useRouter();\n    const [selectedYear, setSelectedYear] = useState(new Date().getFullYear())\n    const [transactionData,setTransactionData] = useState<transaction[]>([])\n    const [yearlyBudget,setYearlyBudget] = useState<budget[]>([])\n    const [monthlyBudget,setMonthlyBudget] = useState<monthly[]>([])\n\n    const searchParams = useSearchParams();\n    useEffect(() => {\n      const yearParam = searchParams.get('year');\n      const year = yearParam ? parseInt(yearParam, 10) : new Date().getFullYear(); \n      if (!isNaN(year)) {\n        setSelectedYear(year); \n      }\n    }, [searchParams]);\n    const transactions_endpoint = \"http://127.0.0.1:1000/get-transactions\"\n\n    const handleViewDetails = (month: string, year:number) => {\n      router.push(`/budget/${month}?year=${year}`);\n    };\n\n    const get_transactions = async () => {\n      try {\n        const url = `${transactions_endpoint}?year=${encodeURIComponent(selectedYear)}`;\n    \n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n    \n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n    \n        const jsonData = await response.json();\n        if (jsonData.length === 0) {\n          setTransactionData([]);\n          setYearlyBudget([]);\n          setMonthlyBudget([]);\n        } else {\n          setTransactionData(jsonData);\n        } \n\n      } catch (error) {\n        if (error instanceof Error) {\n          console.log(error.message);\n        }\n        setTransactionData([]);\n        setYearlyBudget([]);\n        setMonthlyBudget([]);\n      }\n    };\n\n    useEffect(() => {\n      get_transactions();\n      \n    },[selectedYear]);\n\n    useEffect(() => {\n      const total_spend = transactionData.reduce((total, item) => total + item.spend, 0);\n      const total_receive = transactionData.reduce((total, item) => total + item.recieve, 0);\n      const total_balance = total_receive - total_spend;\n    \n      setYearlyBudget([\n        { name: \"Total Spent\", amount: total_spend },\n        { name: \"Total Receive\", amount: total_receive },\n        { name: \"Overall Balance\", amount: total_balance },\n      ]);\n    \n      const groupedData = transactionData.reduce<Record<string, total>>((acc, item) => {\n        const date = new Date(item.date);\n      \n        const year = date.getFullYear();\n        const monthIndex = date.getMonth(); \n      \n        const monthNames = [\n          \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n          \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n        ];\n        const formattedMonth = `${monthNames[monthIndex]} ${year}`;\n      \n        if (!acc[formattedMonth]) {\n          acc[formattedMonth] = { recieve: 0, spend: 0 };\n        }\n        \n        if (item.category == \"Spending\"){\n          acc[formattedMonth].spend += item.spend;\n        }\n          \n        if (item.category == \"Income\"){\n        acc[formattedMonth].recieve += item.recieve;}\n        \n      \n        return acc;\n      }, {});\n      \n    \n      const monthly_total = Object.entries(groupedData).map(([month, totals]) => ({\n        month,\n        receive: totals.recieve,\n        spend: totals.spend,\n      }));\n      setMonthlyBudget(monthly_total);\n    \n    }, [transactionData]);\n    \n    \n\n    return (\n      <div className=\"\">\n        \n        <h1 className=\"pt-28 text-center text-6xl\">\n        {selectedYear} Budget\n        </h1>\n\n      <div className=\"mt-4 flex flex-wrap items-center justify-center gap-12\">\n        {yearlyBudget.map((budget, index) => (\n          <div\n            key={index}\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-60 text-center transition-transform transform hover:scale-105 hover:shadow-2xl\"\n          >\n            <h3 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-2\">\n              {budget.name}\n            </h3>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300\">\n              ${budget.amount.toLocaleString()}\n            </p>\n              </div>\n              ))}\n      </div>\n\n      <div className=\"p-4 mt-4\">\n  <h1 className=\"text-center text-3xl font-semibold mb-6 dark:text-white\">\n    Monthly Summary\n  </h1>\n    <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\n        {monthlyBudget.map((log, index) => (\n          \n            <div\n              key={index}\n              className={`dark:from-gray-800 dark:to-gray-900 shadow-lg rounded-lg py-4 text-center transition-transform transform hover:scale-105 hover:shadow-2xl border border-gray-200 dark:border-gray-700 ${log.receive - log.spend >= 0 ? 'bg-green-100' : 'bg-red-100'}`}\n            >\n              <h2 className=\"text-lg font-bold text-gray-800  mb-4\">\n                {log.month}\n              </h2>\n              <div className=\"grid grid-cols-3\">\n                <p className=\"text-base text-green-500 font-medium mb-2\">\n                  Spend: <br></br> ${log.spend.toFixed(2)}\n                </p>\n                <p className=\"text-base text-blue-500 font-medium mb-2\">\n                  Receive:<br></br> ${log.receive.toFixed(2)}\n                </p>\n                <p className={`text-base font-medium ${log.receive - log.spend >= 0 ? 'text-green-600' : 'text-red-500'}`}>\n                  Balance:<br></br> ${(log.receive - log.spend).toFixed(2)}\n                </p>\n              </div>\n              <button\n                className=\"mt-4 inline-flex items-center justify-center bg-blue-500 text-white py-2 px-4 rounded-md shadow-md hover:bg-blue-600 transition\"\n                onClick={() => handleViewDetails(log.month, selectedYear)}\n              >\n                <span className=\"mr-2\">View Details</span>\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"h-5 w-5\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                  strokeWidth={2}\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n          )\n        )}\n      </div>\n    </div>\n      </div>\n    );\n  }"],"names":[],"mappings":"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"}},
    {"offset": {"line": 356, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["file:///Users/luanjiechen/Desktop/Projects/Personal_Projects/3.budget/budget-web/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 367, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}