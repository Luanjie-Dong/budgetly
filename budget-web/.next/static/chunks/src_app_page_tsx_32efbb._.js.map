{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/luanjiechen/Desktop/Projects/Personal_Projects/3.budget/my-budget/src/app/page.tsx"],"sourcesContent":["'use client'\nimport { useState, useEffect } from \"react\";\nimport {\n  Chart as ChartJS,\n  RadialLinearScale,\n  ArcElement,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { PolarArea , Pie} from 'react-chartjs-2';\n\nChartJS.register(RadialLinearScale, ArcElement, Tooltip, Legend);\n\n\ninterface overview {\n  name: string,\n  amount: number\n}\n\nexport default function Home() {\n  const [overviewData, setOverviewData] = useState<overview[]>([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isModalFinance,setModalFinance] = useState(\"\")\n  const [isModalAmount,setModalAmount] = useState(0)\n\n  const overview_endpoint = \"http://127.0.0.1:1000/get-overview\"\n  const overview_update = \"http://127.0.0.1:1000/modify-overview\"\n  const total = overviewData.reduce((sum,item) => sum + item.amount,0);\n\n  const fetchData = async () => {\n    try {\n      const response = await fetch(overview_endpoint);\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const jsonData = await response.json();\n      setOverviewData(jsonData);\n    } catch (error) {\n      if (error instanceof Error) {\n        console.log(error.message);\n      } \n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const update_finance = async () => {\n    try {\n      const response = await fetch(overview_update, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          name: isModalFinance,\n          amount: isModalAmount,\n        }),\n      });\n  \n      if (response.ok) {\n        const result = await response.json();\n        console.log('Update successful:', result);\n        fetchData();\n        setIsModalOpen(false);\n      } else {\n        console.error('Update failed:', response.statusText);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  };\n\n  const labels = overviewData.map((item) => item.name);\n  const amounts = overviewData.map((item) => item.amount);\n\n  const data = {\n    labels: labels, \n    datasets: [\n      {\n        label: 'Financial Overview',\n        data: amounts, \n        backgroundColor: [\n          'rgba(255, 99, 132, 0.5)', // Red\n          'rgba(54, 162, 235, 0.5)', // Blue\n          'rgba(255, 206, 86, 0.5)', // Yellow\n          'rgba(75, 192, 192, 0.5)', // Green\n          'rgba(153, 102, 255, 0.5)', // Purple\n        ],\n        borderColor: [\n          'rgba(255, 99, 132, 1)', // Red\n          'rgba(54, 162, 235, 1)', // Blue\n          'rgba(255, 206, 86, 1)', // Yellow\n          'rgba(75, 192, 192, 1)', // Green\n          'rgba(153, 102, 255, 1)', // Purple\n        ],\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  \n  \n\n  return (\n    <div className=\" pt-28\">\n      <div className=\"flex flex-wrap items-center justify-center bg-red-400 text-white rounded-lg shadow-md p-6 w-96 mx-auto\">\n        <h2 className=\"text-3xl font-bold mb-2\">Total Amount</h2>\n        <p className=\"text-3xl font-extrabold\">${total.toLocaleString()}</p>\n      </div>\n      <div className=\"mt-4 flex flex-wrap items-center justify-center gap-12\">\n        {overviewData.map((finance, index) => (\n          <div\n            key={index}\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-40 text-center transition-transform transform hover:scale-105 hover:shadow-2xl\"\n          >\n            <h3 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-2\">\n              {finance.name}\n            </h3>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300\">\n              ${finance.amount.toLocaleString()}\n            </p>\n            <button\n              className=\"mt-4 mx-auto flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-300 hover:text-blue-500 transition\"\n              onClick={() => {setIsModalOpen(true), setModalFinance(finance.name), setModalAmount(finance.amount)}}\n            >\n              <img src=\"/edit.webp\" alt=\"Edit\" className=\"w-5 h-5\" />\n              Edit\n            </button>\n                </div>\n              ))}\n      </div>\n      {isModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 relative max-w-md w-full\">\n            <button\n              className=\"absolute top-4 right-4 text-gray-500 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white\"\n              onClick={() => setIsModalOpen(false)}\n            >\n              &#x2715;\n            </button>\n\n            <h1 className=\"text-xl text-center mb-4 font-bold text-gray-800 dark:text-white\">\n              Editing: {isModalFinance}\n            </h1>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  Amount\n                </label>\n                <input\n                  type=\"number\"\n                  value={isModalAmount}\n                  onChange={(e) => setModalAmount(Number(e.target.value))}\n                  placeholder=\"Enter new amount\"\n                  className=\"w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n            </div>\n            <div className=\"mt-6 flex justify-center\">\n              <button\n                className=\"px-6 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 transition\"\n                onClick={() => {\n                  update_finance()\n                }}\n              >\n                Save Changes\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n       <div className=\"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4\" style={{ width: '300px', margin: '20px auto', textAlign: 'center' }}>\n        <Pie data={data} />\n      </div>\n      \n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}